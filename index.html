<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine Invite</title>

  <!-- Tiny5 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tiny5&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #141218;
      --pink: #ff5aa5;
      --white: #ffffff;

      --yes: #1aa34a;
      --no:  #c81f3b;

      --bouquetW: 210px;
      --candleW: 190px;

      --floatAmp: 10px;
      --floatDur: 2.4s;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      background:var(--bg);
      color:var(--white);
    }

    .tiny5{ font-family:"Tiny5", system-ui, sans-serif; font-weight:400; }

    .wrap{
      width:min(520px, 92vw);
      min-height: 92svh;
      display:grid;
      place-items:center;
      padding: 22px 16px;
    }

    /* --- Scenes (phases) --- */
    .scene{
      width:100%;
      display:none;
      text-align:center;
    }
    .scene.active{ display:block; }

    /* Layout */
    .stack{
      display:grid;
      place-items:center;
      gap: 18px;
    }

    /* Typewriter base */
    .typeLine{
      min-height: 44px;
      font-size: clamp(22px, 5vw, 34px);
      line-height: 1.1;
      letter-spacing: 0.5px;
      color: var(--pink);
      white-space: pre-wrap; /* allow wrapping for phase 2 text */
      text-wrap: balance;
      max-width: 34ch;
    }

    .typeLine.typing::after{
      content:"";
      display:inline-block;
      width:10px;
      height: 0.9em;
      margin-left: 6px;
      background: currentColor;
      transform: translateY(2px);
      animation: blink .8s steps(1) infinite;
    }
    @keyframes blink { 50%{ opacity:0; } }

    /* Float groups (bouquet & candle) */
    .floatGroup{
      position: relative;
      animation: floatY var(--floatDur) ease-in-out infinite;
      will-change: transform;
    }
    @keyframes floatY{
      0%,100% { transform: translateY(calc(var(--floatAmp) * -0.5)); }
      50%     { transform: translateY(var(--floatAmp)); }
    }

    .bouquetWrap{
      width: var(--bouquetW);
      max-width: 60vw;
    }

    .candleWrap{
      width: var(--candleW);
      max-width: 60vw;
    }

    .pixelImg{
      width:100%;
      height:auto;
      display:block;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
      user-select:none;
      -webkit-user-drag:none;
    }

    /* Click Here */
    .cta{
      border:0;
      background:transparent;
      cursor:pointer;
      padding: 8px 14px;
      font-size: clamp(22px, 5vw, 32px);
      color: var(--white);
      letter-spacing: 0.5px;
      text-shadow: 0 2px 0 rgba(0,0,0,0.35);
      animation: ctaPulse 1.15s ease-in-out infinite;
    }
    @keyframes ctaPulse{
      0%,100% { transform: translateY(0) scale(1); opacity: 0.95; }
      50%     { transform: translateY(-2px) scale(1.03); opacity: 1; }
    }

    .cta.gone{
      opacity:0;
      pointer-events:none;
      transform: scale(0.95);
      animation:none;
    }

    /* Yes/No */
    .choices{
      display:none;
      gap: 18px;
      justify-content:center;
      margin-top: 2px;
      width: 100%;
      max-width: 340px;
    }
    .choices.show{ display:flex; }

    .btn{
      border:0;
      cursor:pointer;
      padding: 10px 18px;
      border-radius: 6px;
      font-size: 26px;
      line-height: 1;
      color: var(--white);
      box-shadow: 0 4px 0 rgba(0,0,0,0.35);
      transition: transform 140ms ease, opacity 140ms ease, width 200ms ease;
      flex: 1;
      min-width: 120px;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:active{ transform: translateY(2px); box-shadow: 0 2px 0 rgba(0,0,0,0.35); }

    .btn-yes{ background: var(--yes); }
    .btn-no{ background: var(--no); }

    .gone{
      opacity:0;
      pointer-events:none;
      transform: scale(0.92);
    }

    /* When No is removed, make Yes fill row + pulse */
    .choices.only-yes{
      max-width: 420px;
    }
    .choices.only-yes #yesBtn{
      width: 100%;
      flex: 1 1 100%;
      animation: yesPulse 1.05s ease-in-out infinite;
    }
    @keyframes yesPulse{
      0%,100% { transform: scale(1); }
      50%     { transform: scale(1.03); }
    }

    /* Phase 2 text styling */
    .inviteText{
      color: var(--pink);
      font-size: clamp(18px, 4.6vw, 28px);
      line-height: 1.15;
      max-width: 36ch;
    }

    /* small fade in for phase 2 */
    .fadeIn{
      animation: fadeIn 260ms ease-out both;
    }
    @keyframes fadeIn{
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>
  <main class="wrap">

    <!-- PHASE 1 -->
    <section id="scene-1" class="scene active" aria-label="Phase 1">
      <div class="stack">

        <div id="question1" class="typeLine tiny5" aria-live="polite"></div>

        <div class="floatGroup bouquetWrap">
          <img class="pixelImg" src="images/flowers.png" alt="Bouquet" />
        </div>

        <button id="cta" class="cta tiny5" type="button">Click Here</button>

        <div id="choices" class="choices" role="group" aria-label="Response options">
          <button id="yesBtn" class="btn btn-yes tiny5" type="button">Yes!</button>
          <button id="noBtn" class="btn btn-no tiny5" type="button">No.</button>
        </div>
      </div>
    </section>

    <!-- PHASE 2 -->
    <section id="scene-2" class="scene" aria-label="Phase 2">
      <div class="stack fadeIn">

        <div class="floatGroup candleWrap">
          <img class="pixelImg" src="images/candle.png" alt="Candlestick" />
        </div>

        <div id="invite" class="typeLine inviteText tiny5" aria-live="polite"></div>

      </div>
    </section>

  </main>

  <script>
    const cta = document.getElementById("cta");
    const q1 = document.getElementById("question1");
    const choices = document.getElementById("choices");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");

    const scene1 = document.getElementById("scene-1");
    const scene2 = document.getElementById("scene-2");
    const inviteEl = document.getElementById("invite");

    const MESSAGE_1 = "Will You Be My Valentine?";
    const MESSAGE_2 = "My love for you burns bright, you are invited to attend a 3 course Dinner made with love at the Miller-Deaton Estate at 6PM";

    let revealed = false;

    function showScene(elToShow){
      [scene1, scene2].forEach(el => el.classList.remove("active"));
      elToShow.classList.add("active");
    }

    function typewriter(el, text, speed = 38){
      el.textContent = "";
      el.classList.add("typing");
      let i = 0;
      (function tick(){
        el.textContent = text.slice(0, i);
        i++;
        if (i <= text.length) setTimeout(tick, speed);
        else el.classList.remove("typing");
      })();
    }

    cta.addEventListener("click", () => {
      if (revealed) return;
      revealed = true;

      cta.classList.add("gone");
      cta.setAttribute("disabled","true");

      typewriter(q1, MESSAGE_1, 55);
      choices.classList.add("show");
    });

    noBtn.addEventListener("click", () => {
      // hide No
      noBtn.classList.add("gone");
      noBtn.setAttribute("aria-hidden", "true");

      // expand/pulse Yes to fill container
      choices.classList.add("only-yes");
    });

    yesBtn.addEventListener("click", () => {
      showScene(scene2);
      typewriter(inviteEl, MESSAGE_2, 28);
    });
  </script>
</body>
</html>
